<html>

<head>

    <!-- Load ioBroker scripts and styles-->
    <link rel="stylesheet" type="text/css" href="../../lib/css/fancytree/ui.fancytree.min.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/adapter.css"/>
    <link rel="stylesheet" type="text/css" href="../../lib/css/materialize.css">

    <script type="text/javascript" src="../../lib/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="../../socket.io/socket.io.js"></script>

    <script type="text/javascript" src="../../lib/js/materialize.js"></script>
    <script type="text/javascript" src="../../lib/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../lib/js/jquery.fancytree-all.min.js"></script>

    <script type="text/javascript" src="../../js/translate.js"></script>
    <script type="text/javascript" src="../../lib/js/selectID.js"></script>
    <script type="text/javascript" src="../../js/adapter-settings.js"></script>
    <!---
    <script type="text/javascript" src="actions.js"></script>
        -->
    <!-- Load our own files -->
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script type="text/javascript" src="words.js"></script>

    <style>
        .m .col .select-wrapper + label {
            top: -26px;
        }
        .m span {
            font-size: 0.9em;
        }
        .m .tabs {
            height: 48px;
        }
        .m .page {
            height: calc(100% - 118px);
        }
        #dialog-command {
            width: calc(100% - 100px);
        }
        #dialog-command .title {
            background: #187ef2;
            color: #FFF;
            padding: 0.5rem;
        }
        #dialog-command .textarea {
            margin-bottom: 0;
        }
        #dialog-command textarea {
            background: #e9e9e9;
            font-family: courier, monospace;
            font-size: 11px;
            resize: none;
            width: 100%;
            height: calc(100% - 125px);
            margin-bottom: 0;
        }
        #dialog-command .progress-dont-close {
            float: left;
            padding-left: 1rem;
            padding-top: 1rem;
        }
        #dialog-command .command {
            font-style: italic;
        }
        #dialog-command .btn {
            margin-right: 1.5rem;
        }
        .do-restore {
            cursor: pointer;
        }
        .collapsible-body {
            margin-left: 2rem !important;
            padding-top: 0 !important;
        }
        #dialog-sprinkle-edit .title {
            width: 100% !important;
            background: #187ef2;
            color: #FFF;
            padding: 0.3rem;
        }
        .modal .page {
            width: calc(100% - 20px)!important;
        }
        #dialog-sprinkle-edit .modal-content {
            width: 100% !important;
            height: calc(100% - 10px) !important;
            
        }
        #dialog-sprinkle-edit .tabs {
            width: calc(100% - 20px) !important;
        }
        #dialog-sprinkle-edit .page {
            width: calc(100% - 10px) !important;
            
        }
        #dialog-sprinkle-edit .btn {
            margin-right: 1.5rem;
        }
        #dialog-select-member {
            z-index: 9999 !important;
        }
        #dialog-sprinkle-edit {
            z-index: 9900 !important;
        }
        
        #events td:nth-of-type(6) {visibility: hidden; display: none;}
        #events th:nth-of-type(6) {visibility: hidden; display: none;}
        #events td:nth-of-type(7) {visibility: hidden; display: none;}
        #events th:nth-of-type(7) {visibility: hidden; display: none;}
        #events td:nth-of-type(8) {visibility: hidden; display: none;}
        #events th:nth-of-type(8) {visibility: hidden; display: none;}
        #events td:nth-of-type(9) {visibility: hidden; display: none;}
        #events th:nth-of-type(9) {visibility: hidden; display: none;}
        #events td:nth-of-type(10) {visibility: hidden; display: none;}
        #events th:nth-of-type(10) {visibility: hidden; display: none;}
        #events td:nth-of-type(11) {visibility: hidden; display: none;}
        #events th:nth-of-type(11) {visibility: hidden; display: none;}
		#events td:nth-of-type(12) {visibility: hidden; display: none;}
		#events th:nth-of-type(12) {visibility: hidden; display: none;}
		#events td:nth-of-type(13) {visibility: hidden; display: none;}
		#events th:nth-of-type(13) {visibility: hidden; display: none;}
        #events td:nth-of-type(14) {visibility: hidden; display: none;}
        #events th:nth-of-type(14) {visibility: hidden; display: none;}
        #events td:nth-of-type(15) {visibility: hidden; display: none;}
        #events th:nth-of-type(15) {visibility: hidden; display: none;}

        #dialog-sprinkle-edit {
            max-height:95% !important;
            max-width:85% !important;
            width:80% !important; 
            height:90% !important;
            overflow: visible !important;
            top: 10px !important;
        }
    </style>

    <script type="text/javascript">

        // This will be called by the admin adapter when the settings page loads
        // Dies wird vom Adapter Administrator aufgerufen, wenn die Einstellungsseite geladen wird
        function load(settings, onChange) {
            // example: select elements with id=key and class=value and insert value
            // Beispiel: Wählen Sie Elemente mit id = key und class = value aus und fügen Sie einen Wert ein
            if (!settings) return;
            $('.value').each(function () {
                let $key = $(this);
                let id = $key.attr('id');
                if ($key.attr('type') === 'checkbox') {
                    // do not call onChange direct, because onChange could expect some arguments
                    // Rufen Sie onChange nicht direkt auf, da onChange einige Argumente erwarten kann
                    $key.prop('checked', settings[id]).on('change', function () {
                        showHideSettings();
                        onChange();
                    });
                } else {
                    // do not call onChange direct, because onChange could expect some arguments
                    // Rufen Sie onChange nicht direkt auf, da onChange einige Argumente erwarten kann
                    $key.val(settings[id])
                        .on('change', () => onChange())
                        .on('keyup', () => onChange())
                        ;
                    if ($key.attr('type') === 'combobox') {
                        $('#wateringStartTime').change(function(){
                            showHideSettingsCombo();
                        });
                    }
                }
            });

            //var events = [];
            
            let events = settings.events    || [];
            
            showHideSettings();
            showHideSettingsCombo();
            
            values2table('events', events, onChange, tableOnReady);

            $('#responseOIDDialog').on('click', function () {
                let devices = table2values('events');
                let id = 0;
                for (let i = 0; i < devices.length; i++) {
                id = id +1;
                }
                setTimeout(function () {
                    $('#events .values-input[data-name="enabled"][data-index="' + id + '"]').prop('checked', true);
                    $('#events .values-input[data-name="wateringTime"][data-index="' + id + '"]').val('20').trigger('change');
					$('#events .values-input[data-name="wateringAdd"][data-index="' + id + '"]').val('200').trigger('change');
					$('#events .values-input[data-name="wateringInterval"][data-index="' + id + '"]').val('0').trigger('change');
                    $('#events .values-input[data-name="maxSoilMoistureIrrigation"][data-index="' + id + '"]').val('8').trigger('change');
                    $('#events .values-input[data-name="maxSoilMoistureRain"][data-index="' + id + '"]').val('10').trigger('change');
                    $('#events .values-input[data-name="triggersIrrigation"][data-index="' + id + '"]').val('50').trigger('change');
                    $('#events .values-input[data-name="pipeFlow"][data-index="' + id + '"]').val('700').trigger('change');
                    $('#events .values-input[data-name="booster"][data-index="' + id + '"]').prop('checked', false);
                    $('#events .values-input[data-name="endIrrigation"][data-index="' + id + '"]').prop('checked', true);
                }, 1000);
                
                initSelectId(function (sid) {
                    sid.selectId('show', $('#events .values-input[data-name="name"][data-index="' + id + '"]').val(), function (newId) {
                        if (newId) {
                            $('#events .values-input[data-name="name"][data-index="' + id + '"]').val(newId).trigger('change');
                            socket.emit('getObject', newId, function (err, obj) {
                                let name = getName(obj);
                                $('#events .values-input[data-name="sprinkleName"][data-index="' + id + '"]').val(name).trigger('change');
                            });
                        }
                    });
                });
            });

            // Registerkarte Pump Settings
			
            $('#triggerControlVoltageDialogPopUp').on('click', function () {
                initSelectId(function (sid) {
                    sid.selectId('show', $('#triggerControlVoltage').val(), function (newId) {
                        if (newId) {
                            $('#triggerControlVoltage').val(newId).trigger('change');
                        }
                    });
                });
            });
            
            $('#triggerMainPumpDialogPopUp').on('click', function () {
                initSelectId(function (sid) {
                    sid.selectId('show', $('#triggerMainPump').val(), function (newId) {
                        if (newId) {
                            $('#triggerMainPump').val(newId).trigger('change');
                        }
                    });
                });
            });
			
            $('#triggerCisternPumpDialogPopUp').on('click', function () {
                initSelectId(function (sid) {
                    sid.selectId('show', $('#triggerCisternPump').val(), function (newId) {
                        if (newId) {
                            $('#triggerCisternPump').val(newId).trigger('change');
                        }
                    });
                });
            });
            
            $('#actualValueLevelDialogPopUp').on('click', function () {
                initSelectId(function (sid) {
                    sid.selectId('show', $('#actualValueLevel').val(), function (newId) {
                        if (newId) {
                            $('#actualValueLevel').val(newId).trigger('change');
                        }
                    });
                });
            });

			// Registerkarte Extra Settings

            $('#sensorOutsideTemperatureDialogPopUp').on('click', function () {
                initSelectId(function (sid) {
                    sid.selectId('show', $('#sensorOutsideTemperature').val(), function (newId) {
                        if (newId) {
                            $('#sensorOutsideTemperature').val(newId).trigger('change');
                        }
                    });
                });
            });
			
            $('#sensorOutsideHumidityDialogPopUp').on('click', function () {
                initSelectId(function (sid) {
                    sid.selectId('show', $('#sensorOutsideHumidity').val(), function (newId) {
                        if (newId) {
                            $('#sensorOutsideHumidity').val(newId).trigger('change');
                        }
                    });
                });
            });
			
            $('#sensorWindSpeedDialogPopUp').on('click', function () {
                initSelectId(function (sid) {
                    sid.selectId('show', $('#sensorWindSpeed').val(), function (newId) {
                        if (newId) {
                            $('#sensorWindSpeed').val(newId).trigger('change');
                        }
                    });
                });
            });
			
            $('#sensorBrightnessDialogPopUp').on('click', function () {
                initSelectId(function (sid) {
                    sid.selectId('show', $('#sensorBrightness').val(), function (newId) {
                        if (newId) {
                            $('#sensorBrightness').val(newId).trigger('change');
                        }
                    });
                });
            });
			
            $('#sensorRainfallDialogPopUp').on('click', function () {
                initSelectId(function (sid) {
                    sid.selectId('show', $('#sensorRainfall').val(), function (newId) {
                        if (newId) {
                            $('#sensorRainfall').val(newId).trigger('change');
                        }
                    });
                });
            });
            
            onChange(false);
            // reinitialize all the Materialize labels on the page if you are dynamically adding inputs:
            // Initialisieren Sie alle Materialise-Beschriftungen auf der Seite neu, wenn Sie dynamisch Eingaben hinzufügen:
            
            if (M) M.updateTextFields();
            
            getAdapterInstances('feiertage', function (instances) {
                fillInstances('publicHolInstance', instances, settings['publicHolInstance']);
            });

            getAdapterInstances('daswetter', function (instances) {
                fillInstances('weatherForInstance', instances, settings['weatherForInstance']);
            });

            getAdapterInstances('telegram', function (instances) {
                fillInstances('telegramInstance', instances, settings['telegramInstance']);
            });

            getAdapterInstances('whatsapp-cmb', function (instances) {
                fillInstances('whatsappInstance', instances, settings['whatsappInstance']);
            });

            getAdapterInstances('email', function (instances) {
                fillInstances('emailInstance', instances, settings['emailInstance']);
            });

            getAdapterInstances('pushover', function (instances) {
                fillInstances('pushoverInstance', instances, settings['pushoverInstance']);
            });

            sendTo(null, 'getTelegramUser', null, function (obj) {
                fillTelegramUser(settings['telegramUser'], obj);
            });
        }

        function fillTelegramUser(id, str) {
            let user = str.replace(/[{}"\\]/g,"").split(',');
            let $sel = $('#telegramUser');
            $sel.html('<option value="allTelegramUsers">' + _('All Receiver') + '</option>');
            user.forEach(function(val){
                val = val.split(':');
                $('#telegramUser').append('<option value="' + val[1] + '"' + (id === val[1] ? ' selected' : '') + '>' + val[1] +'</option>');
            });
            $sel.select();
        }

        function fillInstances(id, arr, val) {
            let $sel = $('#' + id);
            $sel.html('<option value="">' + _('none') + '</option>');
            for (let i = 0; i < arr.length; i++) {
                let _id = arr[i]._id.replace('system.adapter.', '');
                $sel.append('<option value="' + _id + '"' + (_id === val ? ' selected' : '') + '>' + _id + '</option>');
            }
            $sel.select();
        }

        function tableOnReady() {
            $('#events .table-values-div .table-values .values-buttons[data-command="edit2"]').on('click', function () {
                let id = $(this).data('index');
                initSelectId(function (sid) {
                    sid.selectId('show', $('#events .values-input[data-name="name"][data-index="' + id + '"]').val(), function (newId) {
                        if (newId) {
                            $('#events .values-input[data-name="name"][data-index="' + id + '"]').val(newId).trigger('change');
                            socket.emit('getObject', newId, function (err, obj) {
                                let name = getName(obj);
                                $('#events .values-input[data-name="sprinkleName"][data-index="' + id + '"]').val(name).trigger('change');
                            });
                        }
                    });
                });
            });

            $('#events .table-values-div .table-values .values-buttons[data-command="edit"]').on('click', function () {
                let id = $(this).data('index');
                $('#triggerID').val($('#events .values-input[data-name="triggerID"][data-index="' + id + '"]').val());
                $('#wateringTime').val($('#events .values-input[data-name="wateringTime"][data-index="' + id + '"]').val());
				$('#wateringAdd').val($('#events .values-input[data-name="wateringAdd"][data-index="' + id + '"]').val());
				$('#wateringInterval').val($('#events .values-input[data-name="wateringInterval"][data-index="' + id + '"]').val());
                $('#maxSoilMoistureIrrigation').val($('#events .values-input[data-name="maxSoilMoistureIrrigation"][data-index="' + id + '"]').val());
                $('#maxSoilMoistureRain').val($('#events .values-input[data-name="maxSoilMoistureRain"][data-index="' + id + '"]').val());
                $('#triggersIrrigation').val($('#events .values-input[data-name="triggersIrrigation"][data-index="' + id + '"]').val());
                $('#pipeFlow').val($('#events .values-input[data-name="pipeFlow"][data-index="' + id + '"]').val());
                $('#booster').prop('checked', ($('#events .values-input[data-name="booster"][data-index="' + id + '"]')).prop('checked'));
                $('#endIrrigation').prop('checked', ($('#events .values-input[data-name="endIrrigation"][data-index="' +id + '"]')).prop('checked'));
								
                $('#dialogDeviceEditSprinkle').html($('#events .values-input[data-name="sprinkleName"][data-index="' + id + '"]').val());

                setTimeout(function () {
                    initDialogSprinkle(function (sid) {
                        let newTriggerID = $('#triggerID').val();
                        let newWateringTime = $('#wateringTime').val();
						let newWateringAdd = $('#wateringAdd').val();
						let newWateringInterval = $('#wateringInterval').val();
                        let newMaxSoilMoistureIrrigation = $('#maxSoilMoistureIrrigation').val();
                        let newMaxSoilMoistureRain = $('#maxSoilMoistureRain').val();
                        let newTriggersIrrigation = $('#triggersIrrigation').val();
                        let newPipeFlow = $('#pipeFlow').val();
                        let newBooster = $('#booster').prop('checked');
                        let newEndIrrigation = $('#endIrrigation').prop('checked');

                        $('#events .values-input[data-name="triggerID"][data-index="' + id + '"]').val(newTriggerID).trigger('change');
                        $('#events .values-input[data-name="wateringTime"][data-index="' + id + '"]').val(newWateringTime).trigger('change');
						$('#events .values-input[data-name="wateringAdd"][data-index="' + id + '"]').val(newWateringAdd).trigger('change');
						$('#events .values-input[data-name="wateringInterval"][data-index="' + id + '"]').val(newWateringInterval).trigger('change');
                        $('#events .values-input[data-name="maxSoilMoistureIrrigation"][data-index="' + id + '"]').val(newMaxSoilMoistureIrrigation).trigger('change');
                        $('#events .values-input[data-name="maxSoilMoistureRain"][data-index="' + id + '"]').val(newMaxSoilMoistureRain).trigger('change');
                        $('#events .values-input[data-name="triggersIrrigation"][data-index="' + id + '"]').val(newTriggersIrrigation).trigger('change');
                        $('#events .values-input[data-name="pipeFlow"][data-index="' + id + '"]').val(newPipeFlow).trigger('change');
                        $('#events .values-input[data-name="booster"][data-index="' + id + '"]').prop('checked',newBooster);
                        $('#events .values-input[data-name="endIrrigation"][data-index="' + id + '"]').prop('checked',newEndIrrigation);

                    });
                }, 20)
            });
        }
        
        // This will be called by the admin adapter when the user presses the save button
        // Dies wird vom Admin-Adapter aufgerufen, wenn der Benutzer die Schaltfläche Speichern drückt
        function save(callback) {
            // example: select elements with class=value and build settings object
            // Beispiel: Wählen Sie Elemente mit class = value aus und erstellen Sie das Einstellungsobjekt
            let obj = {};
            $('.value').each(function () {
                let $this = $(this);
                if ($this.attr('type') === 'checkbox') {
                    obj[$this.attr('id')] = $this.prop('checked');
                } else {
                    obj[$this.attr('id')] = $this.val();
                }
            });
            
            // Get edited table
            obj.events    = table2values('events');


            callback(obj);
        }

        function showHideSettingsCombo() {

            // Zeiteinstellungen => Feiertagseinstellung sichtbar bei combobox

            switch ($('#wateringStartTime').val()) {
                case 'livingTime' :				/*Start zur festen Zeit*/
                    $('.visTimeShift').hide();
                    $('.visWeekLiving').show();
                    break;
                case 'livingSunrise' :			/*Start mit Sonnenaufgang*/
                    $('.visTimeShift').show();
                    $('.visWeekLiving').hide();
                    break;
                case 'livingGoldenHourEnd' :	/*Start mit dem Ende der Golden Houer*/
                    $('.visTimeShift').hide();
                    $('.visWeekLiving').hide();
                    break;
            }
        }

        function showHideSettings() {
		
            // Pumpeneinstellungen => Zysterne sichtbar bei checkbox
			
			if ($('#cisternSettings').prop('checked')) {
				$('.cisternObjekt').show();
			} else {
				$('.cisternObjekt').hide();
			}
			
			// Zeiteinstellungen => Feiertagseinstellung sichtbar bei checkbox

            if ($('#publicWeekend').prop('checked')) {
                $('.publicWeek').show();
				$('.publicWeekHol').show();
            } else {
                $('.publicWeek').hide();
				$('.publicWeekHol').hide();
            }			
			
            if ($('#publicHolidays').prop('checked') && $('#publicWeekend').prop('checked')) {
                $('.publicHol').show();
            } else {
                $('.publicHol').hide();
            }

            // zusätzliche Einstellungen => Wettervorhersage

            if ($('#weatherForecast').prop('checked')) {
                $('.weatherFor').show();
            } else {
                $('.weatherFor').hide();
            }

            // Benachrichtigung Karte Ein / Aus

            if ($('#notificationEnabled').prop('checked')) {
                $('.tab-notification').show();
            } else {
                $('.tab-notification').hide();
            }

            // Benachrichtigung - Typ auswahl

            $('#notificationsType').on('change', function () {
                if ($(this).val() === 'Telegram') {
                    $('.email').hide();
                    $('.pushover').hide();
                    $('.telegram').show();
                    $('.whatsapp').hide();
                } else if ($(this).val() === 'E-Mail') {
                    $('.email').show();
                    $('.telegram').hide();
                    $('.pushover').hide();
                    $('.whatsapp').hide();
                } else if ($(this).val() === 'Pushover') {
                    $('.pushover').show();
                    $('.telegram').hide();
                    $('.email').hide();
                    $('.whatsapp').hide();
                } else if ($(this).val() === 'WhatsApp') {
                    $('.whatsapp').show();
                    $('.telegram').hide();
                    $('.email').hide();
                    $('.pushover').hide();
                }
            }).trigger('change');
        }

        let selectId;
        function initSelectId(callback) {
            if (selectId) {
                return callback(selectId);
            }
            socket.emit('getObjects', function (err, objs) {
                selectId = $('#dialog-select-member').selectId('init',  {
                    noMultiselect: true,
                    objects: objs,
                    imgPath:       '../../lib/css/fancytree/',
                    filter:        {type: 'state'},
                    name:          'scenes-select-state',
                    texts: {
                        select:          _('Select'),
                        cancel:          _('Cancel'),
                        all:             _('All'),
                        id:              _('ID'),
                        name:            _('Name'),
                        role:            _('Role'),
                        room:            _('Room'),
                        value:           _('Value'),
                        selectid:        _('Select ID'),
                        from:            _('From'),
                        lc:              _('Last changed'),
                        ts:              _('Time stamp'),
                        wait:            _('Processing...'),
                        ack:             _('Acknowledged'),
                        selectAll:       _('Select all'),
                        unselectAll:     _('Deselect all'),
                        invertSelection: _('Invert selection')
                    },
                    columns: ['image', 'name', 'role', 'room']
                });
                callback(selectId);
            });
        }
        
        function getName(obj) {
            if (obj && obj.common && obj.common.name) {
                let name = obj.common.name;
                if (typeof name === 'object') {
                    name = name[systemLang] || name.en;
                }
                return name;
            } else if (obj && obj.name) {
                let name = obj.name;
                if (typeof name === 'object') {
                    name = name[systemLang] || name.en;
                }
                return name;
            } else {
                let parts = obj.id.split('.');
                let last = parts.pop();
                return last[0].toUpperCase() + last.substring(1).toLowerCase();
            }
        }

        function initDialogSprinkle(callback) {
            let $editDialog = $('#dialog-sprinkle-edit');
            if (!$editDialog.data('inited')) {
                $editDialog.data('inited', true);
                $editDialog.modal({
                    dismissible: false
                });
                
                $editDialog.find('.btn-set').on('click', function () {
                    let $editDialog = $('#dialog-sprinkle-edit');
                    let callback = $editDialog.data('callback');
                    if (typeof callback === 'function') callback();
                    $editDialog.data('callback', null);
                });
            }
            $editDialog.data('callback', callback);
            $editDialog.modal('open');
        }
    </script>

</head>

<body>

    <div class="m adapter-container">
        <div class="row">
            <div class="col s12">
                <ul class="tabs">
                    <li class="tab col s6 l2"><a href="#tab-settings" class="translate active">main settings</a></li>
                    <li class="tab col s6 l2 tab-pump"><a href="#tab-pump" class="translate">Pump Settings</a></li>
                    <li class="tab col s6 l2 tab-time"><a href="#tab-time" class="translate">Time Settings</a></li>
                    <li class="tab col s6 l2 tab-extra"><a href="#tab-extra" class="translate">Extra Settings</a></li>
                    <li class="tab col s6 l2 tab-notification"><a href="#tab-notification" class="translate">Notifications</a></li>
                </ul>
            </div>
            <div class="row">
                <!-- main settings -->
                <div id="tab-settings" class="col s12 page">
                    <div class="row">
                        <div class="col s12 m4 l2">
                            <img src="sprinklecontrol.png" class="logo">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12">
                            <h6 class="translate sub-title">Sprinkler control</h6>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12" id="events">
                            <div class="row">
                                <div class="col s2 m1 l1 left">
                                    <a  id="responseOIDDialog" class="btn-floating waves-effect waves-light blue table-button-add"><i class="material-icons">add</i></a>
                                </div>
                            </div>
                            <div class="table-values-div">
                                <table class="table-values">
                                    <thead>
                                    <tr>
                                        <th data-name="_index" style="width: 80px; background: #64b5f6; text-align: center" data-style="text-align: center">Nr</th>
                                        <th data-name="enabled"  style="width: 70px; background: #64b5f6" data-style="width: 70px" data-type="checkbox" class="translate"></th>
                                        <th data-name="sprinkleName" data-type="text" style="width: 40%; background: #64b5f6" class="translate">Name</th>
                                        <th data-name="name" data-type="text" style="width: 40%; background: #64b5f6" class="translate">Object-ID sprinkler</th>
                                        <th data-buttons="edit2" style="width: 150px; background: #64b5f6; height: 40px" data-style="width: 150px; text-align: left" ></th>
                                        <!-- ********************** only for temp states ********************** -->
                                        <th data-name="triggerID" data-type="text" style="width: 30%; background: #64b5f6" class="translate"></th>
                                        <th data-name="wateringTime" data-type="number" style="width: 0px" class="translate"></th>
										<th data-name="wateringAdd" data-type="number" style="width: 0px" class="translate"></th>
										<th data-name="wateringInterval" data-type="number" style="width: 0px" class="translate"></th>
                                        <th data-name="maxSoilMoistureIrrigation" data-type="number" style="width: 0px" class="translate"></th>
                                        <th data-name="maxSoilMoistureRain" data-type="number" style="width: 0px" class="translate"></th>
                                        <th data-name="triggersIrrigation" data-type="number" style="width: 0px" class="translate"></th>
                                        <th data-name="pipeFlow" data-type="number" style="width: 0px" class="translate"></th>
                                        <th data-name="booster" data-type="checkbox" style="width: 0px" class="translate"></th>
                                        <th data-name="endIrrigation" data-type="checkbox" style="..." class="translate"></th>
                                        <!-- ****************************************************************** -->
                                        <th data-buttons="edit up down delete" style="width: 100px; background: #64b5f6"></th>
                                    </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
				<!-- Pump Settings -->
				<div id="tab-pump" class="col s12 page">
                    <div class="row">
						<div class="col s12">
							<h6 class="translate sub-title">Settings for Valve</h6>
						</div>
					</div>
                    <div class="row">					
                        <div class="col s6 l3 input-field">
                            <input type="text" class="value" id="triggerControlVoltage" />
                            <label for="triggerControlVoltage" class="translate"></label>
                            <span class="translate">Control voltage of the valves</span>
                        </div>
                        <div class="col s1 m2 l2">
                            <a id="triggerControlVoltageDialogPopUp" class="btn-floating waves-effect waves-light blue table-button-add"><i class="material-icons">add</i></a>
                        </div>
						<div class="col s6 l2 input-field">
							<input type="number" class="value" id="maximumParallelValves" min=1 max=5 placeholder="1-5" step="1" />
							<label for="maximumParallelValves" class="translate"></label>
							<span class="translate">Maximum parallel operation of the valves</span>
						</div>						
					</div>
					<div class="row">
                        <div class="col s12">
                            <h6 class="translate sub-title">Settings for Pump</h6>
                        </div>
                    </div>
                    <div class="row">					
                        <div class="col s6 l3 input-field">
                            <input type="text" class="value" id="triggerMainPump" />
                            <label for="triggerMainPump" class="translate"></label>
                            <span class="translate">Main pump</span>
                        </div>
                        <div class="col s1 m2 l2">
                            <a id="triggerMainPumpDialogPopUp" class="btn-floating waves-effect waves-light blue table-button-add"><i class="material-icons">add</i></a>
                        </div>
						<div class="col s6 l2 input-field">
							<input type="number" class="value" id="triggerMainPumpPower" min=500 max=5000 placeholder="500-5000" step="100" />
							<label for="triggerMainPumpPower" class="translate"></label>
							<span class="translate">maximum pump output of the main pump in l/h</span>
						</div>
					</div>
					<div class="row">
						<div class="col s6 l2 input-field">
                            <input type="checkbox" class="value" id="cisternSettings" />
                            <span for="cisternSettings" class="translate">Add cistern pump as priority pump</span>
                        </div>
					</div>
					<div class="row col s12 cisternObjekt">
						<div class="row">
							<div class="input-field col s5 l4">
								<input type="text" class="value" id="triggerCisternPump" />
								<label for="triggerCisternPump" class="translate"></label>
								<span class="translate">cistern pump</span>
							</div>
							<div class="col s1 l2">
								<a id="triggerCisternPumpDialogPopUp" class="btn-floating waves-effect waves-light blue table-button-add"><i class="material-icons">add</i></a>
							</div>
							<div class="col s6 l2 input-field">
								<input type="number" class="value" id="triggerCisternPumpPower" min=500 max=5000 placeholder="500-5000" step="100" />
								<label for="triggerCisternPumpPower" class="translate"></label>
								<span class="translate">maximum pump capacity of the cistern in l/h</span>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s5 l4">
								<input type="text" class="value" id="actualValueLevel" />
								<label for="actualValueLevel" class="translate"></label>
								<span class="translate">Level of the cistern</span>
							</div>
							<div class="col s1 l2">
								<a id="actualValueLevelDialogPopUp" class="btn-floating waves-effect waves-light blue table-button-add"><i class="material-icons">add</i></a>
							</div>
							<div class="col s6 l2 input-field">
								<input type="number" class="value" id="triggerMinCisternLevel" min=0 max=100 placeholder="0-100" step="5" />
								<label for="triggerMinCisternLevel" class="translate"></label>
								<span class="translate">Minimum fill level of the cysts in %</span>
							</div>
						</div>
					</div>
				</div>
                <!-- time settings -->
                <div id="tab-time" class="col s12 page">
                    <div class="row">
                        <div class="input-field col s12 m4">
                            <select type="combobox" class="value" id="wateringStartTime">
                                <option value="livingTime" class="translate">start with a fixed start time</option>
                                <option value="livingSunrise" class="translate">Start time at sunrise</option>
                                <option value="livingGoldenHourEnd" class="translate">Start time at the end of the golden hour</option>
                            </select>
                            <label for="wateringStartTime" class="translate"></label>
                            <span class="translate">Start time for irrigation</span>
                        </div>
                        <div class="input-field col s6 l2 visTimeShift">
                            <input type="number" id="timeShift" class="value" min="-120" max="120" placeholder="-120-120" step="1" />
							<label for="timeShift" class="translate"></label>
                            <span class="translate">time shift</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s6 l2 visWeekLiving">
                            <input type="time" class="value" id="weekLiving" />
                            <label for="weekLiving" class="translate"></label>
                            <span class="translate">Start time in the week</span>
                        </div>
                    </div>
					<div class="row">
						<div class="input-field col s6 l2">
                            <input type="checkbox" class="value" id="publicWeekend" />
                            <span for="publicWeekend" class="translate">different start time on weekends</span>
						</div>
                        <div class="input-field col s12 m6 l2 publicWeek">
                            <input type="time" class="value" id="weekEndLiving" />
                            <label for="weekEndLiving" class="translate"></label>
                            <span class="translate">Start time at the weekend</span>
                        </div>						
					</div>
					<div class="row">
						<div class="input-field col s6 l2 publicWeekHol">
                            <input type="checkbox" class="value" id="publicHolidays" />
                            <span for="publicHolidays" class="translate">Start time of public holidays as on weekends</span>
                        </div>
                        <div class="input-field col s12 m6 l2 publicHol">
                            <select id="publicHolInstance" class="value"></select>
                            <label for="publicHolInstance" class="translate"></label>
                            <span class="translate">public holidays Instance</span>
                        </div>
					</div>
                </div>
                <!-- Tab Extra -->
                <div id="tab-extra" class="col s12 page">
                    <!-- Astro Einstellungen -->
                    <div class="col s4">
                        <div class="row">
                            <div class="col s4">
                                <h6 class="translate sub-title">Astro settings</h6>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s4 l2 input-field">
                                <input type="text" class="value" id="latitude" />
                                <label for="latitude" class="translate"></label>
                                <span class="translate">latitude</span>
                            </div>
                            <div class="col s4 l2 input-field">
                                <input type="text" class="value" id="longitude" />
                                <label for="longitude" class="translate"></label>
                                <span class="translate">longitude</span>
                            </div>
                        </div>
                    </div>
                    <!-- Debug Einstellungen -->
                    <div class="col s4">
                        <div class="row">
                            <div class="col s4">
                                <h6 class="translate sub-title">Debug settings</h6>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s4 input-field">
                                <input type="checkbox" class="value" id="debug" />
                                <span for="debug" class="translate">debug</span>
                            </div>
                        </div>
                    </div>
                    <!-- notifications on/off -->
                    <div class="col s4">
                        <div class="row">
                            <div class="col s8">
                                <h6 class="translate sub-title">Additional notifications setting</h6>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s8 input-field">
                                <input type="checkbox" class="value" id="notificationEnabled" />
                                <span for="notificationEnabled" class="translate">Enable / Disable Notifications</span>
                            </div>
                        </div>
                    </div>
                    <!-- aktuelle Wetterdaten -->
                    <div class="row">
                        <div class="col s12">
                            <h6 class="translate sub-title">Evaporation calculation sensors</h6>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s6 l3 input-field">
                            <input type="text" class="value" id="sensorOutsideTemperature" />
                            <label for="sensorOutsideTemperature" class="translate"></label>
                            <span class="translate">Temperature sensor</span>
                        </div>
                        <div class="col s1 m2 l2">
                            <a id="sensorOutsideTemperatureDialogPopUp" class="btn-floating waves-effect waves-light blue table-button-add"><i class="material-icons">add</i></a>
                        </div>						
                        <div class="col s6 l3 input-field">
                            <input type="text" class="value" id="sensorOutsideHumidity" />
                            <label for="sensorOutsideHumidity" class="translate"></label>
                            <span class="translate">Humidity sensor</span>
                        </div>
                        <div class="col s1 m2 l2">
                            <a id="sensorOutsideHumidityDialogPopUp" class="btn-floating waves-effect waves-light blue table-button-add"><i class="material-icons">add</i></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s6 l3 input-field">
                            <input type="text" class="value" id="sensorWindSpeed" />
                            <label for="sensorWindSpeed" class="translate"></label>
                            <span class="translate">Wind speed sensor</span>
                        </div>
                        <div class="col s1 m2 l2">
                            <a id="sensorWindSpeedDialogPopUp" class="btn-floating waves-effect waves-light blue table-button-add"><i class="material-icons">add</i></a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s6 l3 input-field">
                            <input type="text" class="value" id="sensorBrightness" />
                            <label for="sensorBrightness" class="translate"></label>
                            <span class="translate">Brightness sensor</span>
                        </div>
                        <div class="col s1 m2 l2">
                            <a id="sensorBrightnessDialogPopUp" class="btn-floating waves-effect waves-light blue table-button-add"><i class="material-icons">add</i></a>
                        </div>
                        <div class="col s6 l3 input-field">
                            <input type="text" class="value" id="sensorRainfall" />
                            <label for="sensorRainfall" class="translate"></label>
                            <span class="translate">rain sensor</span>
                        </div>
                        <div class="col s1 m2 l2">
                            <a id="sensorRainfallDialogPopUp" class="btn-floating waves-effect waves-light blue table-button-add"><i class="material-icons">add</i></a>
                        </div>						
                    </div>
                    <!-- Wettervorhersage -->
                    <div class="col s6">
                        <div class="row">
                            <div class="col s6">
                                <h6 class="translate sub-title">Weather forecast</h6>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s6 l2 weatherForecast">
                                <input type="checkbox" class="value" id="weatherForecast" />
                                <span for="weatherForecast" class="translate">Use weather forecast</span>
                            </div>
                            <div class="input-field col s12 m6 l2 weatherFor">
                                <select id="weatherForInstance" class="value"></select>
                                <label for="weatherForInstance" class="translate"></label>
                                <span class="translate">Select the weather forecast instance</span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- notifications -->
                <div id="tab-notification" class="col s12 page">
                    <div class="row">
                        <div class="input-field col s12 m4">
                            <select class="value" id="notificationsType">
                                <option value="Telegram" class="translate">Telegram</option>
                                <option value="E-Mail" class="translate">E-Mail</option>
                                <option value="Pushover" class="translate">Pushover</option>
                                <option value="WhatsApp" class="translate">WhatsApp</option>
                            </select>
                            <label for="notificationsType" class="translate">notifications type</label>
                        </div>
                    </div>
                    <!-- Telegram -->
                    <div class="row telegram">
                        <div class="input-field col s12 m6 l3 telegram">
                            <select id="telegramInstance" class="value"></select>
                            <label for="telegramInstance" class="translate">Telegram instance</label>
                        </div>
                        <div class="input-field col s12 m6 l3 telegram">
                            <select id="telegramUser" class="value"></select>
                            <label for="telegramUser" class="translate">Telegram Receiver</label>
                        </div>
                    </div>
                    <div class="row telegram">
                        <div class="input-field col s12 m6 l3 telegram">
                            <select class="value" id="telegramNoticeType">
                                <option value="longTelegramNotice" class="translate">Long Notifications</option>
                                <option value="shortTelegramNotice" class="translate">Short Notifications</option>
                            </select>
                            <label class="translate" for="telegramNoticeType">Notification Style</label>
                        </div>
                        <div class="input-field col s12 m6 l3 telegram">
                            <input type="number" class="value" id="telegramWaitToSend" min="0" max="20"/>
                            <label for="telegramWaitToSend" class="translate">Waiting for the send (seconds)</label>
                        </div>
                    </div>
                    <div class="row telegram">
                        <div class="input-field col s12 m6 l3 telegram">
                            <input class="value" id="telegramSilentNotice" type="checkbox"/>
                            <label for="telegramSilentNotice" class="translate">Silent Notice</label>
                        </div>
                        <div class="input-field col s12 m6 l3 telegram">
                            <input class="value" id="telegramOnlyError" type="checkbox"/>
                            <label for="telegramOnlyError" class="translate">Notification only on errors</label>
                        </div>
                    </div>

                    <!-- WhatsApp -->
                    <div class="row whatsapp">
                        <div class="input-field col s12 m6 l3 whatsapp">
                            <select id="whatsappInstance" class="value"></select>
                            <label for="whatsappInstance" class="translate">WhatsApp instance</label>
                        </div>
                        <div class="input-field col s12 m6 l3 whatsapp">
                            <select class="value" id="whatsappNoticeType">
                                <option value="longWhatsappNotice" class="translate">Long Notifications</option>
                                <option value="shortWhatsappNotice" class="translate">Short Notifications</option>
                            </select>
                            <label class="translate" for="whatsappNoticeType">Notification Style</label>
                        </div>
                    </div>
                    <div class="row whatsapp">
                        <div class="input-field col s12 m6 l3 whatsapp">
                            <input type="number" class="value" id="whatsappWaitToSend" min="0" max="20"/>
                            <label for="whatsappWaitToSend" class="translate">Waiting for the send (seconds)</label>
                        </div>
                    </div>
                    <div class="row whatsapp">
                        <div class="input-field col s12 m6 l3 whatsapp">
                            <input class="value" id="whatsappOnlyError" type="checkbox"/>
                            <label for="whatsappOnlyError" class="translate">Notification only on errors</label>
                        </div>
                    </div>
                    <!-- Pushover -->
                    <div class="row pushover">
                        <div class="input-field col s12 m6 l3 pushover">
                            <select id="pushoverInstance" class="value"></select>
                            <label for="pushoverInstance" class="translate">Pushover instance</label>
                        </div>
                        <div class="input-field col s12 m6 l3 pushover">
                            <select class="value" id="pushoverNoticeType">
                                <option value="longPushoverNotice" class="translate">Long Notifications</option>
                                <option value="shortPushoverNotice" class="translate">Short Notifications</option>
                            </select>
                            <label class="translate" for="pushoverNoticeType">Notification Style</label>
                        </div>
                    </div>
                    <div class="row pushover">
                        <div class="input-field col s12 m6 l3 pushover">
                            <input type="number" class="value" id="pushoverWaitToSend" min="0" max="20"/>
                            <label for="pushoverWaitToSend" class="translate">Waiting for the send (seconds)</label>
                        </div>
                        <div class="input-field col s12 m6 l3 pushover">
                            <input class="value" id="pushoverDeviceID" type="text">
                            <label for="pushoverDeviceID" class="translate">device ID (optional)</label>
                        </div>
                    </div>

                    <div class="row pushover">
                        <div class="input-field col s12 m6 l3 pushover">
                            <select class="value" id="pushoverSound">
                                <option value="">              default </option>
                                <option value="pushover">      pushover </option>
                                <option value="bike">          bike </option>
                                <option value="bugle">         bugle</option>
                                <option value="cashregister">  cashregister </option>
                                <option value="classical">     classical </option>
                                <option value="cosmic">        cosmic </option>
                                <option value="falling">       falling</option>
                                <option value="gamelan">       gamelan </option>
                                <option value="incoming">      incoming </option>
                                <option value="intermission">  intermission </option>
                                <option value="magic">         magic </option>
                                <option value="mechanical">    mechanical </option>
                                <option value="pianobar">      pianobar </option>
                                <option value="siren">         siren</option>
                                <option value="spacealarm">    spacealarm </option>
                                <option value="tugboat">       tugboat </option>
                                <option value="alien">         alien</option>
                                <option value="climb">         climb </option>
                                <option value="persistent">    persistent </option>
                                <option value="echo">          echo</option>
                                <option value="updown">        updown </option>
                                <option value="none">          none</option>
                            </select>
                            <label class="translate" for="pushoverSound">Notification Sound</label>
                        </div>
                    </div>

                    <div class="row pushover">
                        <div class="input-field col s12 m6 l3 pushover">
                            <input class="value" id="pushoverSilentNotice" type="checkbox"/>
                            <label for="pushoverSilentNotice" class="translate">Silent Notice</label>
                        </div>
                        <div class="input-field col s12 m6 l3 pushover">
                            <input class="value" id="pushoverOnlyError" type="checkbox"/>
                            <label for="pushoverOnlyError" class="translate">Notification only on errors</label>
                        </div>
                    </div>
                    <!-- email -->
                    <div class="row email">
                        <div class="input-field col s12 m6 l3 email">
                            <input class="value" id="emailReceiver" type="text">
                            <label for="emailReceiver" class="translate">email receiver</label>
                            <span class="translate">email receiver</span>
                        </div>
                        <div class="input-field col s12 m6 l3 email">
                            <input class="value" id="emailSender" type="text">
                            <label for="emailSender" class="translate">email sender</label>
                            <span class="translate">email sender</span>
                        </div>
                    </div>
                    <div class="row email">
                        <div class="input-field col s12 m6 l3 email">
                            <select id="emailInstance" class="value"></select>
                            <label for="emailInstance" class="translate">email instance</label>
                        </div>
                        <div class="input-field col s12 m6 l3 email">
                            <select class="value" id="emailNoticeType">
                                <option value="longEmailNotice" class="translate">Long Notifications</option>
                                <option value="shortEmailNotice" class="translate">Short Notifications</option>
                            </select>
                            <label class="translate" for="emailNoticeType">Notification Style</label>
                        </div>
                    </div>
                    <div class="row email">
                        <div class="input-field col s12 m6 l3 email">
                            <input type="number" class="value" id="emailWaitToSend" min="0" max="20"/>
                            <label for="emailWaitToSend" class="translate">Waiting for the send (seconds)</label>
                        </div>
                        <div class="input-field col s12 m6 l3 email">
                            <input class="value" id="emailOnlyError" type="checkbox"/>
                            <label for="emailOnlyError" class="translate">Notification only on errors</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="m material-dialogs">
            <div id="dialog-select-member" class="modal modal-fixed-footer">
                <div class="modal-content">
                    <div class="row">
                        <div class="col s12 title"></div>
                    </div>
                    <div class="row">
                        <div class="col s12 dialog-content">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a class="modal-action modal-close waves-effect waves-green btn btn-set"><i class="large material-icons left">check</i><span class="translate">Select</span></a>
                    <a class="modal-action modal-close waves-effect waves-green btn btn-close"><i class="large material-icons left ">close</i><span class="translate">Cancel</span></a>
                </div>
            </div>
            <div id="dialog-sprinkle-edit" class="modal modal-fixed-footer">
                <div class="row">
                    <div class="modal-content">

                        <div class="row">
                            <div class="col s12">
                                <h6 class="title"><span class="translate">Edit Device:</span> <span id="dialogDeviceEditSprinkle"></span></h6>
                            </div>
                        </div>
                        <div class="col s12">
                            <ul class="tabs">
                                <li class="tab col s12 l6"><a href="#tab-settingsPopUp" class="translate active">Main settings</a></li>
                                <li class="tab col s12 l6 tab-pumpPopUp"><a href="#tab-pumpPopUp" class="translate">Pump settings</a></li>
                            </ul>
                        </div>
                        <div id="tab-pumpPopUp" class="col s12 page">
                            <div class="row">
                                <div class="col s6 l2 input-field">
                                    <input type="number" class="form-control" id="pipeFlow" min=200 max=3000 placeholder="200-2000" step="50" />
                                    <label for="pipeFlow" class="translate"></label>
                                    <span class="translate">Flow amount</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s6 l2 input-field">
                                    <input type="checkbox" class="form-control" id="booster" />
                                    <span for="booster" class="translate">Booster</span>
                                </div>
                            </div>
                        </div>
                        <div id="tab-settingsPopUp" class="col s12 page">
                            <div class="row">
                                <div class="col s6 l2 input-field">
                                    <input type="number" class="form-control" id="wateringTime" min=5 max=90 />
                                    <label for="wateringTime" class="translate"></label>
                                    <span class="translate">Watering duration</span>
                                </div>
                                <div class="col s6 l2 input-field">
                                    <input type="number" class="form-control" id="wateringAdd" min=100 max=300 step="10" />
                                    <label for="wateringAdd" class="translate"></label>
                                    <span class="translate">maximum irrigation extension</span>
                                </div>
                                <div class="col s6 l2 input-field">
                                    <input type="number" class="form-control" id="wateringInterval" min=0 max=30 step="5" />
                                    <label for="wateringInterval" class="translate"></label>
                                    <span class="translate">Watering interval</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s6 l2 input-field">
                                    <input type="number" class="form-control" id="triggersIrrigation" min=30 max=80 />
                                    <label for="triggersIrrigation" class="translate"></label>
                                    <span class="translate">lowest percentage soil moisture</span>
                                </div>
                                <div class="row">
                                    <div class="col s6 l2 input-field">
                                        <input type="checkbox" class="form-control" id="endIrrigation" />
                                        <span for="endIrrigation" class="translate">after irrigation = 100</span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s6 l2 input-field">
                                    <input type="number" class="form-control" id="maxSoilMoistureIrrigation" min=5 max=20 placeholder="5.0-20.0" step="0.1" />
                                    <label for="maxSoilMoistureIrrigation" class="translate"></label>
                                    <span class="translate">maximum soil moisture after irrigation</span>
                                </div>
                                <div class="col s6 l2 input-field">
                                    <input type="number" class="form-control" id="maxSoilMoistureRain" min="5.0" max="25.0" placeholder="5.0-25.0" step="0.1" />
                                    <label for="maxSoilMoistureRain" class="translate"></label>
                                    <span class="translate">maximum soil moisture after the rain</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a class="modal-action modal-close waves-effect waves-green btn btn-set"><i class="large material-icons left">check</i><span class="translate">Ok</span></a>
                    <a class="modal-action modal-close waves-effect waves-green btn btn-close"><i class="large material-icons left">close</i><span class="translate">Cancel</span></a>
                </div>
            </div>
        </div>
    </div>
</body>

</html>